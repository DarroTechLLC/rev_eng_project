<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">User Management Index</h1>
    <a href="/register" class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" data-bs-toggle="modal" data-bs-target="#registerModal">
        <i class="fas fa-user-plus fa-sm text-white-50"></i> Create New User
    </a>
</div>

<!-- Content Row -->
<div class="row">
    <div class="col-12">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Users List</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered" id="usersTable" width="100%" cellspacing="0">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Users will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Register Modal -->
<div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="registerModalLabel">Add New User</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="user" method="post" th:action="@{/register}" th:object="${registerFormDTO}">
                    <div class="form-group">
                        <input type="text" class="form-control form-control-user" 
                               id="username" th:field="*{username}"
                               placeholder="Username">
                        <p class="text-danger" th:errors="*{username}"></p>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <input type="text" class="form-control form-control-user"
                                id="firstName" th:field="*{firstName}"
                                placeholder="First Name">
                            <p class="text-danger" th:errors="*{firstName}"></p>
                        </div>
                        <div class="col-sm-6">
                            <input type="text" class="form-control form-control-user"
                                id="lastName" th:field="*{lastName}"
                                placeholder="Last Name">
                            <p class="text-danger" th:errors="*{lastName}"></p>
                        </div>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-control form-control-user"
                               id="email" th:field="*{email}"
                               placeholder="Email Address">
                        <p class="text-danger" th:errors="*{email}"></p>
                    </div>
                    <div class="form-group">
                        <input type="tel" class="form-control form-control-user"
                               id="phone" th:field="*{phone}"
                               placeholder="Phone Number (Optional)">
                        <p class="text-danger" th:errors="*{phone}"></p>
                    </div>
                    <div class="mb-3">
                        <label for="roles" class="form-label">User Roles</label>
                        <select class="form-select form-control-user" id="roles" th:field="*{roleIds}" size="3" multiple>
                            <option th:each="role : ${roles}"
                                    th:value="${role.id}"
                                    th:text="${role.name}">Role Name</option>
                        </select>
                        <small class="form-text text-muted">Hold Ctrl/Cmd to select multiple roles. If none selected, 'User' role will be assigned by default.</small>
                    </div>
                    <div class="form-group row">
                        <div class="col-sm-6 mb-3 mb-sm-0">
                            <input type="password" class="form-control form-control-user"
                                id="password" th:field="*{password}"
                                placeholder="Password">
                            <p class="text-danger" th:errors="*{password}"></p>
                        </div>
                        <div class="col-sm-6">
                            <input type="password" class="form-control form-control-user"
                                id="verifyPassword" th:field="*{verifyPassword}"
                                placeholder="Repeat Password">
                            <p class="text-danger" th:errors="*{verifyPassword}"></p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div> 